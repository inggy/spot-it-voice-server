(this["webpackJsonpspot-it-client"]=this["webpackJsonpspot-it-client"]||[]).push([[0],{107:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(51),o=a.n(i),s=(a(61),a(9)),l=a(0),c=a(53),d=(a(91),a(14)),h=function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),i=a[0],o=a[1],l=Object(n.useState)(""),c=Object(s.a)(l,2),h=c[0],u=c[1],f=Object(n.useState)(!1),m=Object(s.a)(f,2),b=m[0],p=m[1];return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(t){return t.preventDefault(),e.handleSubmit(i,h),!1}},r.a.createElement("label",{htmlFor:"roomName"},"Room name"),r.a.createElement("input",{name:"roomName",value:i,onChange:function(e){return o(e.target.value)}}),r.a.createElement("label",{htmlFor:"nickName"},"Your name"),r.a.createElement("input",{name:"nickName",value:h,onChange:function(e){return u(e.target.value)}}),b&&r.a.createElement("button",{type:"submit",disabled:""===i||""===h},"Join")),!b&&r.a.createElement("button",{onClick:function(){d.a.getPermission().then((function(e){return p(e)}))}},"Grant Microphone Permission"))},u=a(2),f=a(3),m=function(){function e(t){Object(u.a)(this,e),this.app=void 0,this.scenes=void 0,this.current="",this.app=t,this.scenes={}}return Object(f.a)(e,[{key:"getCurrentScene",value:function(){return this.current}},{key:"addScene",value:function(e,t){this.scenes[e]=t}},{key:"switch",value:function(e){var t=this.scenes[this.current];if(t&&this.app.stage.removeChild(t),this.scenes.hasOwnProperty(e)){this.current=e;var a=this.scenes[e];a&&(a.hasRun||(a.init(),a.hasRun=!0),this.app.stage.addChild(a))}}}]),e}(),b=a(5),p=a(4),y=function(e){Object(b.a)(a,e);var t=Object(p.a)(a);function a(e,n){var r;return Object(u.a)(this,a),(r=t.call(this)).app=void 0,r.hasRun=!1,r.room=void 0,r.app=e,r.room=n,r}return Object(f.a)(a,[{key:"init",value:function(){}}]),a}(l.b),v=function(e){Object(b.a)(a,e);var t=Object(p.a)(a);function a(e,n,r){var i;Object(u.a)(this,a),(i=t.call(this)).clickCallback=null;var o=new l.f(e,r),s=new l.c,c=o.width+2*n.padding,d=o.height+2*n.padding;return s.lineStyle(n.borderWidth,n.borderColor,1,0),s.beginFill(n.fillColor),s.drawRoundedRect(Math.floor(-c/2),0,c,d,n.radius),s.endFill(),o.x=Math.floor(-o.width/2),o.y=Math.floor(n.padding),i.addChild(s),i.addChild(o),i.interactive=!0,i.buttonMode=!0,i.on("pointerdown",(function(){i.clickCallback&&i.clickCallback()})),i}return Object(f.a)(a,[{key:"onClick",value:function(e){this.clickCallback=e}},{key:"setEnabled",value:function(e){e?(this.interactive=!0,this.buttonMode=!0,this.alpha=1):(this.interactive=!1,this.buttonMode=!1,this.alpha=.5)}}]),a}(l.b);function C(e){e.send("sitDown")}function g(e){e.send("standUp")}function w(e){e.send("startGame")}function k(e){e.send("returnLobby")}var O=function(){function e(){Object(u.a)(this,e),this.callbacks=[]}return Object(f.a)(e,[{key:"addListener",value:function(e){this.callbacks.push(e)}},{key:"invokeCallbacks",value:function(e){this.callbacks.forEach((function(t){return t(e)}))}}]),e}(),S=new WeakMap;var L=function(e,t){e.onChange||(S.set(e,new O),e.onChange=function(t){return function(e,t){var a;null===(a=S.get(e))||void 0===a||a.invokeCallbacks(t)}(e,t)});var a=S.get(e);a&&a.addListener(t)};function j(e){return e.host}function I(e,t){return j(e)===t}function E(e,t){return!!e.players[t]}function x(e,t){return e.players[t].name}var R={HEADING_1:new l.g({fontFamily:"Comic Sans MS",fontSize:36}),HEADING_2:new l.g({fontFamily:"Comic Sans MS",fontSize:24}),default:new l.g({fontFamily:"Comic Sans MS",fontSize:16})},B={default:{padding:10,borderColor:0,borderWidth:3,fillColor:16777215,radius:8},primary:{padding:10,borderColor:0,borderWidth:3,fillColor:3525722,radius:8}},G=function(e){Object(b.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).playerListContainer=new l.b,e.spectatorListContainer=new l.b,e.sitDownButton=new v("Play",B.default,R.HEADING_2),e.standUpButton=new v("Spectate",B.default,R.HEADING_2),e.startGameButton=new v("Start Game",B.primary,R.HEADING_1),e.sitDown=function(){C(e.room)},e.standUp=function(){g(e.room)},e.startGame=function(){w(e.room)},e}return Object(f.a)(a,[{key:"init",value:function(){var e=this;L(this.room.state,(function(t){t.forEach((function(t){switch(t.field){case"host":case"players":e.renderPlayerList(),e.updateButtonStates();break;case"spectators":e.renderSpectatorList()}}))}));var t=new l.f("Players",R.HEADING_1);t.x=1*this.app.renderer.width/3-t.width/2,t.y=100,this.addChild(t);var a=new l.f("Spectators",R.HEADING_1);a.x=2*this.app.renderer.width/3-a.width/2,a.y=100,this.addChild(a),this.playerListContainer.x=t.x+t.width/2,this.playerListContainer.y=t.y+t.height+15,this.addChild(this.playerListContainer),this.spectatorListContainer.x=a.x+a.width/2,this.spectatorListContainer.y=this.playerListContainer.y,this.addChild(this.spectatorListContainer),this.renderPlayerList(),this.renderSpectatorList(),this.sitDownButton.x=Math.floor(this.app.renderer.width/2),this.sitDownButton.y=470,this.sitDownButton.onClick(this.sitDown),this.standUpButton.x=Math.floor(this.app.renderer.width/2),this.standUpButton.y=470,this.standUpButton.onClick(this.standUp),this.startGameButton.x=Math.floor(this.app.renderer.width/2),this.startGameButton.y=530,this.startGameButton.onClick(this.startGame),this.addChild(this.sitDownButton,this.standUpButton),this.updateButtonStates()}},{key:"renderPlayerList",value:function(){var e,t=this;this.playerListContainer.removeChildren(),(e=this.room.state,Object.values(e.players)).forEach((function(e,a){var n=new l.f(e.name+(I(t.room.state,e.id)?" [Host]":""),R.HEADING_2);n.x=-n.width/2,n.y=30*a,t.playerListContainer.addChild(n)}))}},{key:"renderSpectatorList",value:function(){var e,t=this;this.spectatorListContainer.removeChildren(),(e=this.room.state,Object.values(e.spectators)).forEach((function(e,a){var n=new l.f(e.name,R.HEADING_2);n.x=-n.width/2,n.y=30*a,t.spectatorListContainer.addChild(n)}))}},{key:"updateButtonStates",value:function(){var e=E(this.room.state,this.room.sessionId);this.sitDownButton.setEnabled(!e),this.sitDownButton.visible=!e,this.standUpButton.setEnabled(e),this.standUpButton.visible=e,I(this.room.state,this.room.sessionId)?this.addChild(this.startGameButton):this.removeChild(this.startGameButton)}}]),a}(y);function M(e){return e.gameState.phase}function D(e){return e.gameState.centerCardIndex}function P(e){return e.deck[D(e)]}function _(e,t){return e.gameState.winner===t}function N(e,t){return e.gameState.playerHandIndex[t]}function T(e,t,a){var n=A(e,t);return n?n.length-a:null}function A(e,t){var a;return null===(a=e.gameState.hands[t])||void 0===a?void 0:a.cards}function F(e,t,a){var n=A(e,t)[a];return e.deck[n]}function H(e,t){var a=new Set;return P(e).symbols.forEach((function(e){return a.add(z(e))})),function(e,t){var a=A(e,t)[N(e,t)];return e.deck[a]}(e,t).symbols.forEach((function(e){return a.add(z(e))})),a}function z(e){return U[e-1]}var U=["flower","gorilla","eggplant","moon","monkey","snowman","water","fire","heart","camera","sparkle","raccoon","unicorn","puzzle","sloth","bird","snake","soccer","bee","palette","clover","canada","rain","lightning","tornado","umbrella","wave","cake","snow","bacon","clown","poop","robot","nails","leg","santa","bell","drum","castle","covid","sob","genie","train","hat","purse","peach","pretzle","dumpling","martini","taxi","thread","boat","cash","trash","couch","saturn","ticket"],W=Object.fromEntries(U.map((function(e,t){return[e,t+1]}))),J=function(e){Object(b.a)(a,e);var t=Object(p.a)(a);function a(e,n){var r;return Object(u.a)(this,a),(r=t.call(this)).playerTextMapping={},r.playerScoreMapping={},r.renderPlayerList=function(e){r.removeChildren(),r.playerTextMapping={},r.playerScoreMapping={};var t=0;Object.keys(e.players).forEach((function(a){var n=new l.f(e.players[a].name,R.HEADING_2);n.x=0,n.y=65*t,r.addChild(n),r.playerTextMapping[a]=n;var i,o=function(e,t){if(_(e,t))return 0;var a=N(e,t),n=A(e,t);return null!=a&&n?n.length-a:0}(e,a),s=new l.f("".concat(i=o," card").concat(i>1?"s":""),R.HEADING_2);s.x=20,s.y=n.y+30,r.addChild(s),r.playerScoreMapping[a]=s,t++}))},n.onStateChange(r.renderPlayerList),r.renderPlayerList(n.state),r}return a}(l.b);var Y=a(27),K={spriteKey:window.__PUBLIC_URL__+"/assets/spritesheet.json",getSpriteSheet:function(){return l.d.shared.resources[K.spriteKey].spritesheet}},V=function(e){Object(b.a)(a,e);var t=Object(p.a)(a);function a(e,n){var r,i,o,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(u.a)(this,a),(o=t.call(this))._clickCallback=[],o.disableOverlay=new l.c,o.errorOverlay=new l.c;var c=new l.c;c.lineStyle(2,10066329,1),c.beginFill(16777215,1),c.drawCircle(0,0,e/2),c.endFill(),o.addChild(c),o.disableOverlay.beginFill(16777215,.5),o.disableOverlay.drawCircle(0,0,e/2),o.disableOverlay.endFill(),o.errorOverlay.lineStyle(4,14876672,1),o.errorOverlay.drawCircle(0,0,e/2);var d=K.getSpriteSheet(),h=2*Math.PI/(n.symbols.length-1),f=n.rotationOffset*(2*Math.PI),m=e/3.75,b=n.symbols.map((function(t,a){var r=(t+"").padStart(2,"0")+".png",i=new l.e(d.textures[r]),c=e/4,u=0===a?0:(m+e/9*n.offset[a])*Math.cos(f+a*h),b=0===a?0:(m+e/9*n.offset[a])*Math.sin(f+a*h);return i.x=u,i.y=b,i.width=c*n.scale[a],i.height=c*n.scale[a],i.anchor.set(.5),i.rotation=n.rotation[a]*(2*Math.PI),s&&(i.interactive=!0,i.buttonMode=!0,i.on("pointerdown",(function(e){o._clickCallback.forEach((function(e){return e(t)}))}))),i})),p=n.symbols.map((function(t,a){var r=new l.f(t+" "+z(t)),i=0===a?0:(m+e/9*n.offset[a])*Math.cos(f+a*h),o=0===a?0:(m+e/9*n.offset[a])*Math.sin(f+a*h);return r.x=i,r.y=o,r}));return(r=o).addChild.apply(r,Object(Y.a)(b)),(i=o).addChild.apply(i,Object(Y.a)(p)),o}return Object(f.a)(a,[{key:"disable",value:function(){this.removeChild(this.errorOverlay);var e=new l.h.BlurFilter(5);this.filters=[e],this.addChild(this.disableOverlay)}},{key:"showError",value:function(){this.addChild(this.errorOverlay)}},{key:"hideError",value:function(){this.removeChild(this.errorOverlay)}},{key:"clear",value:function(){this.filters=[],this.removeChildren()}},{key:"subscribeClick",value:function(e){this._clickCallback.push(e)}}]),a}(l.b),$=function(e){Object(b.a)(a,e);var t=Object(p.a)(a);function a(e,n){var r;Object(u.a)(this,a),(r=t.call(this)).curCard=null,r.size=0,r.schema=void 0,r.playedByLabel=void 0,r.schema=e,r.size=n;var i=new l.f("Center Card",R.HEADING_1);return i.x=-Math.floor(i.width/2),i.y=-(Math.floor(r.size/2)+85),r.playedByLabel=new l.f("",R.HEADING_2),r.playedByLabel.y=-(Math.floor(r.size/2)+40),L(e.gameState,(function(t){t.forEach((function(t){"centerCardIndex"===t.field&&r.drawNewCard(P(e),function(e){var t=D(e),a=Object.keys(e.gameState.hands).find((function(a){return A(e,a).includes(t)}));return a?x(e,a):null}(e))}))})),r.drawNewCard(P(e),null),r.addChild(i),r.addChild(r.playedByLabel),r}return Object(f.a)(a,[{key:"drawNewCard",value:function(e,t){this.curCard&&(this.removeChild(this.curCard),this.curCard.destroy({children:!0})),t?(this.playedByLabel.text="played by ".concat(t),this.playedByLabel.x=-Math.floor(this.playedByLabel.width/2)):this.playedByLabel.text="",this.curCard=new V(this.size,e),this.addChild(this.curCard)}},{key:"reset",value:function(){this.curCard&&this.removeChild(this.curCard),this.curCard=null}},{key:"prepareForGame",value:function(){this.drawNewCard(P(this.schema),null)}}]),a}(l.b),q=function(e){Object(b.a)(a,e);var t=Object(p.a)(a);function a(e,n,r){var i;Object(u.a)(this,a),(i=t.call(this)).curCard=null,i.size=0,i.playerId="",i.isPlayer=!0,i.wrongPlayTimeout=null,i.playCardCallback=void 0,i.schema=void 0,i.cardsRemainingLabel=void 0,i._onLocalTimeoutChange=function(e,t){if(t===i.playerId){var a,n,r=Date.now();if(i.wrongPlayTimeout)clearTimeout(i.wrongPlayTimeout),i.wrongPlayTimeout=null,null===(a=i.curCard)||void 0===a||a.hideError();if(r<e)null===(n=i.curCard)||void 0===n||n.showError(),i.wrongPlayTimeout=setTimeout((function(){var e;null===(e=i.curCard)||void 0===e||e.hideError(),i.wrongPlayTimeout=null}),e-r)}},i.currentTransciptionResultId="",i.hasSubmiitedForCurrentTranscription=!1,i._handleWords=function(e){if(console.log("_handleWords",e.words.toString()),e.resultId!==i.currentTransciptionResultId&&(i.hasSubmiitedForCurrentTranscription=!1,i.currentTransciptionResultId=e.resultId),!i.hasSubmiitedForCurrentTranscription){var t=H(i.schema,i.playerId);console.log("candidateWords",t);var a=e.words.find((function(e){return t.has(e)}));if(console.log("submittableWord",a),a){i.hasSubmiitedForCurrentTranscription=!0;var n=W[a];i.playCardCallback(n),console.log("playing",a,n)}}},i.playCardCallback=r,i.schema=e,i.size=n;var o=new l.f("Your Hand",R.HEADING_1);return o.x=-Math.floor(o.width/2),o.y=-(Math.floor(i.size/2)+85),i.cardsRemainingLabel=new l.f("",R.HEADING_2),i.cardsRemainingLabel.y=-(Math.floor(i.size/2)+40),i.addChild(o),i.addChild(i.cardsRemainingLabel),i}return Object(f.a)(a,[{key:"drawNewCard",value:function(e){var t=this;this.curCard&&(this.removeChild(this.curCard),this.curCard.destroy({children:!0})),this.curCard=new V(this.size,e,this.isPlayer),this.curCard.subscribeClick((function(e){t.playCardCallback(e)})),this.addChild(this.curCard)}},{key:"updateCardsRemaining",value:function(e){null==e?this.cardsRemainingLabel.text="":(this.cardsRemainingLabel.text=e+" card"+(1===e?"":"s")+" remaining",this.cardsRemainingLabel.x=-Math.floor(this.cardsRemainingLabel.width/2))}},{key:"endGameAsWinner",value:function(){var e;null===(e=this.curCard)||void 0===e||e.clear(),this.updateCardsRemaining(0),this._unsubscribeFromPlayerDataChange(),d.a.endTranscription()}},{key:"endGame",value:function(){var e;null===(e=this.curCard)||void 0===e||e.disable(),this._unsubscribeFromPlayerDataChange(),d.a.endTranscription()}},{key:"prepareForGame",value:function(e,t){this.playerId=e,this.isPlayer=t,this._subscribeToPlayerDataChange()}},{key:"reset",value:function(){this.updateCardsRemaining(null),this.curCard&&this.removeChild(this.curCard),this.curCard=null}},{key:"startGame",value:function(){var e,t;d.a.beginTranscription((e=this.schema,t=this.playerId,e.gameState.transcribeUrls[t]),this._handleWords),this.drawNewCard(F(this.schema,this.playerId,0)),this.updateCardsRemaining(T(this.schema,this.playerId,0))}},{key:"_subscribeToPlayerDataChange",value:function(){var e=this;console.log("subscribe"),this.schema.gameState.playerHandIndex.onChange=function(t,a){a===e.playerId&&(e.drawNewCard(F(e.schema,e.playerId,t)),e.updateCardsRemaining(T(e.schema,e.playerId,t)))},this.schema.gameState.localTimeouts.onChange=this._onLocalTimeoutChange}},{key:"_unsubscribeFromPlayerDataChange",value:function(){console.log("unsubscribe"),this.schema.gameState.playerHandIndex.onChange=function(){},this.schema.gameState.localTimeouts.onChange=function(){}}}]),a}(l.b),Q=function(e){Object(b.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).toLobbyButton=new v("Back to lobby",B.default,R.HEADING_2),e.getReadyLabel=new l.f("Get Ready!",R.HEADING_1),e.handContainer=void 0,e.deckContainer=void 0,e.effectivePlayerId="",e.gameInitialized=!1,e.backToLobby=function(){k(e.room)},e}return Object(f.a)(a,[{key:"init",value:function(){var e=this,t=new J(this.room.sessionId,this.room);t.x=10,t.y=96,this.addChild(t);var a=new $(this.room.state,370);a.x=415,a.y=370;var n=new q(this.room.state,370,(function(t){return function(e,t,a){e.send("selectSymbol",{symbol:t,centerCardIndex:a,localTime:Date.now()})}(e.room,t,D(e.room.state))}));n.x=850,n.y=370,this.addChild(a),this.addChild(n),this.toLobbyButton.x=630,this.toLobbyButton.y=570,this.toLobbyButton.onClick(this.backToLobby),this.getReadyLabel.x=Math.floor(n.x-this.getReadyLabel.width/2),this.getReadyLabel.y=Math.floor(n.y-this.getReadyLabel.height/2),L(this.room.state,(function(t){t.forEach((function(t){"mode"===t.field&&"lobby"===t.value&&(e.removeChild(e.toLobbyButton),a.reset(),n.reset())}))})),L(this.room.state.gameState,(function(t){t.forEach((function(t){"phase"===t.field&&e.handleGamePhaseChange(t.value)}))})),this.handContainer=n,this.deckContainer=a,this.handleGamePhaseChange(M(this.room.state))}},{key:"initializeDecks",value:function(){var e=E(this.room.state,this.room.sessionId);this.effectivePlayerId=e?this.room.sessionId:j(this.room.state),this.deckContainer.prepareForGame(),this.handContainer.prepareForGame(this.effectivePlayerId,e),this.gameInitialized=!0}},{key:"showHandLabel",value:function(e){e&&(this.getReadyLabel.text=e,this.getReadyLabel.x=Math.floor(this.handContainer.x-this.getReadyLabel.width/2)),this.addChild(this.getReadyLabel)}},{key:"handleGamePhaseChange",value:function(e){switch(e){case"pregame":this.initializeDecks(),this.showHandLabel("Get Ready!");break;case"in_progress":this.gameInitialized||this.initializeDecks(),this.handContainer.startGame(),this.removeChild(this.getReadyLabel);break;case"endgame":if(_(this.room.state,this.effectivePlayerId))this.showHandLabel("You Win!"),this.handContainer.endGameAsWinner();else{var t=x(a=this.room.state,a.gameState.winner);this.showHandLabel("".concat(t," wins")),this.handContainer.endGame()}I(this.room.state,this.room.sessionId)&&this.addChild(this.toLobbyButton);break;default:this.removeChild(this.getReadyLabel),this.gameInitialized=!1}var a}}]),a}(y),X=window.document.location,Z=X.host.replace(/:.*/,""),ee="ws://localhost:2567";Z.indexOf("localhost")<0&&(ee=X.protocol.replace("http","ws")+"//"+Z+(X.port?":"+X.port:""));var te=new c.Client(ee);var ae=function(){var e=Object(n.useRef)(null),t=Object(n.useState)(!1),a=Object(s.a)(t,2),i=a[0],o=a[1],c=Object(n.useState)(),d=Object(s.a)(c,2),u=d[0],f=d[1],b=Object(n.useState)(!1),p=Object(s.a)(b,2),y=p[0],v=p[1];return Object(n.useEffect)((function(){l.d.shared.add(window.__PUBLIC_URL__+"/assets/spritesheet.json").load((function(){var t=new l.a({backgroundColor:16777215,width:1100,height:630});null!=e.current&&(e.current.prepend(t.view),f(t),o(!0))}))}),[]),r.a.createElement("div",{className:"App"},r.a.createElement("div",{id:"joinGameForm"},i&&!y&&r.a.createElement(h,{handleSubmit:function(e,t){te.joinOrCreate("spot-it",{roomName:e,name:t}).then((function(t){var a=u,n=new m(a);n.addScene("lobby",new G(a,t)),n.addScene("game",new Q(a,t));var r=new l.f("Room: ".concat(e),R.HEADING_2);r.x=10,r.y=10,a.stage.addChild(r),L(t.state,(function(e){e.forEach((function(e){switch(e.field){case"mode":e.value!==n.getCurrentScene()&&n.switch(e.value)}}))})),v(!0)}))}})),r.a.createElement("div",{ref:e}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},14:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return v}));var n,r,i,o=a(2),s=a(3),l=a(55),c=a(28),d=a(54),h=a(25),u=a.n(h),f=a(26),m=new l.a(c.b,c.a),b=function(t,a,o){n?n.playRecording():((n=new u.a).on("format",(function(e){r=e.sampleRate})),n.setStream(t)),(i=new WebSocket(a)).binaryType="arraybuffer",i.onopen=function(){n.on("data",(function(t){var a=function(t){var a=u.a.toRaw(t);if(null==a)return;var n=f.a(a,r,44100),i=f.b(n),o=(s=e.from(i),{headers:{":message-type":{type:"string",value:"event"},":event-type":{type:"string",value:"AudioEvent"}},body:s});var s;return m.marshall(o)}(t);i.readyState===i.OPEN&&i.send(a)}))},function(t){i.onmessage=function(a){var n=m.unmarshall(e.from(a.data)),r=JSON.parse(String.fromCharCode.apply(String,n.body));if("event"===n.headers[":message-type"].value){var o=y(r);o&&(console.log("wireSocketEvents: callback"),t(o))}else console.error(r.Message),p(i)},i.onerror=function(e){console.error("socket error",e),p(i)},i.onclose=function(e){n.pauseRecording(),console.log("microphone paused")}}(o)};var p=function(e){e&&(e.close(),console.log("Transcription stopped"))};var y=function(e){var t=e.Transcript.Results;if(t.length>0&&t[0].Alternatives.length>0)return{words:decodeURIComponent(escape(t[0].Alternatives[0].Transcript)).toLowerCase().replace(".","").replace("?","").replace("!","").split(" "),resultId:t[0].ResultId};return null},v=function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,null,[{key:"getPermission",value:function(){var e=this;return new Promise((function(t,a){d({video:!1,audio:!0}).then((function(a){e.stream=a,t(!0)})).catch((function(e){switch(e.name){case"DevicesNotFoundError":case"NotFoundError":alert("No microphone device found. (".concat(e.name,")"));break;case"NotAllowedError":case"PermissionDeniedError":alert("Permission rejected. (".concat(e.name,")"));break;default:alert("Unknown error. (".concat(e.name,")"))}t(!1)}))}))}},{key:"beginTranscription",value:function(e,t){console.log(e),b(this.stream,e,t)}},{key:"endTranscription",value:function(){p(i)}}]),e}();v.stream=void 0}).call(this,a(6).Buffer)},26:function(e,t,a){"use strict";function n(e){for(var t=0,a=new ArrayBuffer(2*e.length),n=new DataView(a),r=0;r<e.length;r++,t+=2){var i=Math.max(-1,Math.min(1,e[r]));n.setInt16(t,i<0?32768*i:32767*i,!0)}return a}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:44100,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16e3;if(a===t)return e;for(var n=t/a,r=Math.round(e.length/n),i=new Float32Array(r),o=0,s=0;o<i.length;){for(var l=Math.round((o+1)*n),c=0,d=0,h=s;h<l&&h<e.length;h++)c+=e[h],d++;i[o]=c/d,o++,s=l}return i}a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}))},56:function(e,t,a){e.exports=a(107)},61:function(e,t,a){},79:function(e,t){},91:function(e,t,a){},97:function(e,t){},99:function(e,t){}},[[56,1,2]]]);
//# sourceMappingURL=main.7a3fda24.chunk.js.map